# proj-sleep

Данный проект направлен на разработку и валидацию системы персонализированных рекомендаций по оптимизации качества сна на основе данных фитнес-браслета и машинного обучения. Проект включает полный цикл: от сбора и обработки данных до A/B тестирования эффективности рекомендаций.

что делалось
Анализ взаимосвязи объективных метрик сна (данные браслета) и субъективной оценки качества сна
Построение и сравнение моделей машинного обучения для прогнозирования sleep_score
Валидация эффективности рекомендаций через A/B тестирование

1. Сбор и обработка данных
Источник: Данные с фитнес-браслета (продолжительность сна, фазы сна, время засыпания/пробуждения, активность)

Целевая переменная: Субъективная оценка качества сна (sleep_score, 0-100)

Подготовка:

Косинусное преобразование циклических временных признаков

Расчет абсолютных длительностей фаз сна

Детрендинг для устранения эффекта обучения

2. Анализ и моделирование
Корреляционный анализ: Выявление наиболее значимых предикторов

Сравнение моделей: 12 моделей из 6 семейств (линейные, tree-based, GAM, GPR, GLM, другие)

Валидация: LOOCV, пермутационные тесты, бутстрап-агрегация коэффициентов

Оптимизация: Байесовский поиск оптимального времени засыпания

3. Экспериментальная валидация
Дизайн: A/B тестирование с дизайном ABAB (n-of-1)

Метод: Бутстрап-анализ разницы средних (100,000 итераций)

Метрики: 99% доверительный интервал, p-value

Ключевые результаты
1. Лучшая модель прогнозирования
Модель: GAM с регуляризацией (lam=10)

Качество: R2 = 0.628 на тесте, MAE = 3.756

Признаки: ['time2sleep', 'sleep_duration', 'time_warm_up', 'steps', 'time2wake']

2. Важность признаков
Время засыпания/пробуждения — наиболее значимые предикторы

Продолжительность сна — фундаментальный физиологический фактор

Дневная активность — вторичный, но значимый фактор

3. Результаты A/B тестирования
Наблюдаемый эффект: +6.50 балла улучшения sleep_score

Статистическая значимость: 95% ДИ [3.875, 9.0] не содержит 0

Практическая значимость: Улучшение на 8.6%


#инструменты

Для работы с малыми выборками:
LOOCV вместо k-fold для менее смещенных оценок
Бутстрап-агрегация для оценки устойчивости коэффициентов

Для обработки временных данных:
Косинусное кодирование циклических признаков
Детрендинг для устранения временных трендов
Систематический перебор комбинаций признаков

Для валидации:
A/A тест для проверки методологии
бутстрап для A/B тестов
ABAB дизайн для n-of-1 исследований


Ограничения
Малая выборка (n=52) ограничивает сложность моделей, мощность стиатистических тестов
Краткосрочные данные (не получится учесть долгие сезонные эффекты, время года и тд и тп и др)
